#!/bin/bash

# üö® –≠–ö–°–¢–†–ï–ù–ù–´–ô –ü–ê–¢–ß –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø OAUTH 500 ERROR
# –ü—Ä–æ–±–ª–µ–º–∞: 500 Internal Server Error –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ç–æ–∫–µ–Ω–∞ WordPress

echo "üö® –≠–ö–°–¢–†–ï–ù–ù–´–ô –ü–ê–¢–ß –î–õ–Ø –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø OAUTH 500 ERROR"
echo "=================================================="

# 1. –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–ê–¢–£–° –°–ï–†–í–ò–°–û–í
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤..."
pm2 status

# 2. –ü–†–û–í–ï–†–Ø–ï–ú –õ–û–ì–ò BACKEND
echo "2Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ backend..."
pm2 logs backend --lines 20

# 3. –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê–ï–ú BACKEND
echo "3Ô∏è‚É£ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º backend..."
pm2 restart backend

# 4. –ñ–î–ï–ú 5 –°–ï–ö–£–ù–î
echo "4Ô∏è‚É£ –ñ–¥–µ–º 5 —Å–µ–∫—É–Ω–¥..."
sleep 5

# 5. –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–ê–¢–£–°
echo "5Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞..."
pm2 status

# 6. –¢–ï–°–¢–ò–†–£–ï–ú API
echo "6Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º API..."
curl -I https://mcp-kv.ru/api/mcp/tools

# 7. –ü–†–û–í–ï–†–Ø–ï–ú –õ–û–ì–ò –ü–û–°–õ–ï –ü–ï–†–ï–ó–ê–ü–£–°–ö–ê
echo "7Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞..."
pm2 logs backend --lines 10

echo ""
echo "üéØ –ü–ê–¢–ß –ó–ê–í–ï–†–®–ï–ù!"
echo "‚úÖ Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω"
echo "‚úÖ API –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω"
echo ""
echo "üîç –¢–µ–ø–µ—Ä—å –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω WordPress"
echo "üìã –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: pm2 logs backend"
