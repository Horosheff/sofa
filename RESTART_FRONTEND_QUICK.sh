#!/bin/bash

# üöÄ –ë–´–°–¢–†–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö FRONTEND
echo "üöÄ –ë–´–°–¢–†–´–ô –ü–ï–†–ï–ó–ê–ü–£–°–ö FRONTEND"
echo "=============================="

# 1. –ü–†–û–í–ï–†–Ø–ï–ú –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°
echo "1Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å..."
pm2 status

# 2. –û–°–¢–ê–ù–ê–í–õ–ò–í–ê–ï–ú FRONTEND
echo "2Ô∏è‚É£ –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º frontend..."
pm2 stop frontend

# 3. –û–ß–ò–©–ê–ï–ú –ö–≠–®
echo "3Ô∏è‚É£ –û—á–∏—â–∞–µ–º –∫—ç—à..."
cd /opt/sofiya/frontend
rm -rf .next
rm -rf node_modules/.cache

# 4. –ü–ï–†–ï–°–û–ë–ò–†–ê–ï–ú
echo "4Ô∏è‚É£ –ü–µ—Ä–µ—Å–æ–±–∏—Ä–∞–µ–º frontend..."
npm run build

# 5. –ó–ê–ü–£–°–ö–ê–ï–ú FRONTEND
echo "5Ô∏è‚É£ –ó–∞–ø—É—Å–∫–∞–µ–º frontend..."
pm2 start frontend

# 6. –ñ–î–ï–ú 3 –°–ï–ö–£–ù–î–´
echo "6Ô∏è‚É£ –ñ–¥–µ–º 3 —Å–µ–∫—É–Ω–¥—ã..."
sleep 3

# 7. –ü–†–û–í–ï–†–Ø–ï–ú –°–¢–ê–¢–£–°
echo "7Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å..."
pm2 status

# 8. –ü–†–û–í–ï–†–Ø–ï–ú –õ–û–ì–ò
echo "8Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—è–µ–º –ª–æ–≥–∏ frontend..."
pm2 logs frontend --lines 5

# 9. –¢–ï–°–¢–ò–†–£–ï–ú –°–ê–ô–¢
echo "9Ô∏è‚É£ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Å–∞–π—Ç..."
curl -I https://mcp-kv.ru

echo ""
echo "üéØ FRONTEND –ü–ï–†–ï–ó–ê–ü–£–©–ï–ù!"
echo "‚úÖ –ö—ç—à –æ—á–∏—â–µ–Ω"
echo "‚úÖ Frontend –ø–µ—Ä–µ—Å–æ–±—Ä–∞–Ω"
echo "‚úÖ –°–µ—Ä–≤–∏—Å –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω"
echo ""
echo "üîç –¢–µ–ø–µ—Ä—å –∑–∞–π–¥–∏ –Ω–∞ https://mcp-kv.ru –∏ –ø—Ä–æ–≤–µ—Ä—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏!"
echo "üìã –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ 'üîç –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞' –≤ —Å–µ–∫—Ü–∏–∏ Telegram"
