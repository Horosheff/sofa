#!/bin/bash

echo "üîß –ü—Ä–∏–º–µ–Ω—è–µ–º —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —Ñ–∏–∫—Å –¥–ª—è Telegram —Ç–æ–∫–µ–Ω–∞..."

cd /opt/sofiya

# –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
git stash

# –ü–æ–¥—Ç—è–Ω—É—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ–π—Ç–∏ –≤ frontend
cd frontend

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å frontend
pm2 stop frontend

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π –±–∏–ª–¥
rm -rf .next

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
echo "üì¶ –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ frontend..."
npm run build

# –ó–∞–ø—É—Å—Ç–∏—Ç—å frontend
pm2 start frontend

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

echo ""
echo "‚úÖ –ü–∞—Ç—á –ø—Ä–∏–º–µ–Ω—ë–Ω!"
echo ""
echo "üß™ –ü–†–û–í–ï–†–¨ –í –ë–†–ê–£–ó–ï–†–ï:"
echo "   1. Ctrl+Shift+R –¥–ª—è –∂—ë—Å—Ç–∫–æ–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏"
echo "   2. –û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Network"
echo "   3. –í–≤–µ–¥–∏ —Ç–æ–∫–µ–Ω: 7071960627:AAFmTfBGhdKbknz6835pQBK541jaxMKxv54"
echo "   4. –ù–∞–∂–º–∏ '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏'"
echo "   5. –ü–æ—Å–º–æ—Ç—Ä–∏ –≤ Request Payload - –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:"
echo "      {\"telegram_bot_token\": \"7071960627:...\"}"
echo ""

